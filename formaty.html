<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Přehled reklamních formátů - Seznam Creative Validator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #1f2937;
      background: #f9fafb;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 40px;
    }

    h1 {
      font-size: 32px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 30px;
    }

    .network-section {
      margin-bottom: 40px;
    }

    .network-title {
      font-size: 24px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 3px solid #3b82f6;
    }

    .network-note {
      margin-bottom: 15px;
      color: #6b7280;
      font-size: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    thead {
      background: #f3f4f6;
    }

    th {
      text-align: left;
      padding: 12px 15px;
      font-weight: 600;
      font-size: 14px;
      color: #374151;
      border-bottom: 2px solid #e5e7eb;
    }

    td {
      padding: 12px 15px;
      border-bottom: 1px solid #e5e7eb;
      font-size: 14px;
    }

    tbody tr:hover {
      background: #f9fafb;
    }

    .format-name {
      font-weight: 600;
      color: #1f2937;
    }

    .dimensions {
      font-family: 'Courier New', monospace;
      color: #3b82f6;
      font-size: 13px;
    }

    .file-size {
      color: #059669;
      font-weight: 500;
    }

    .formats {
      color: #6b7280;
      font-size: 13px;
    }

    .device {
      display: inline-block;
      padding: 4px 8px;
      background: #eff6ff;
      color: #1e40af;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
    }

    .device.mobile {
      background: #f0fdf4;
      color: #166534;
    }

    .device.desktop {
      background: #fef3c7;
      color: #92400e;
    }

    .device.app {
      background: #fae8ff;
      color: #86198f;
    }

    .notes {
      font-size: 12px;
      color: #6b7280;
      font-style: italic;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 20px;
      color: #3b82f6;
      text-decoration: none;
      font-weight: 500;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .info-box {
      background: #fef3c7;
      border: 1px solid #fbbf24;
      border-left: 4px solid #f59e0b;
      border-radius: 6px;
      padding: 20px;
      margin-bottom: 30px;
    }

    .info-box h3 {
      margin: 0 0 10px 0;
      color: #92400e;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-box p {
      margin-bottom: 10px;
      color: #78350f;
      font-size: 14px;
    }

    .info-box ul {
      margin-left: 20px;
      color: #78350f;
      font-size: 14px;
    }

    .info-box code {
      background: rgba(0,0,0,0.1);
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
    }

    .sos-warning {
      background: #fef3c7;
      border: 1px solid #fbbf24;
      border-left: 4px solid #f59e0b;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 20px;
    }

    .sos-warning p {
      margin: 0;
      color: #78350f;
      font-size: 14px;
    }

    .sos-warning p:first-child {
      font-weight: 600;
    }

    .sos-warning p:last-child {
      margin-top: 8px;
      font-size: 13px;
    }

    footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #e5e7eb;
      text-align: center;
      color: #6b7280;
      font-size: 14px;
    }

    footer a {
      color: #3b82f6;
    }

    #html5-formats-list, #html5-other-systems {
      margin-left: 20px;
      color: #78350f;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-link">← Zpět na Creative Validator</a>

    <h1>Přehled reklamních formátů</h1>
    <p class="subtitle">Kompletní seznam podporovaných formátů pro všechny reklamní systémy Seznam.cz a Google Ads</p>

    <div class="info-box">
      <h3>
        <span style="font-size: 24px;">⚡</span>
        HTML5 bannery - Požadavky
      </h3>
      <p>
        HTML5 bannery jsou podporovány ve formátu ZIP s následujícími požadavky:
      </p>
      <ul>
        <li>Maximálně 40 souborů v archivu</li>
        <li>Maximálně 2 úrovně podadresářů</li>
        <li>Přesně 1 HTML soubor v kořenovém adresáři</li>
        <li>Povinná proměnná <code>__CLICKTHRU__</code> pro clickthrough URL</li>
        <li>Právě jeden tag <code>&lt;a&gt;</code> s atributem <code>target="_top"</code></li>
        <li>Zakázané funkce: window.open(), Enabler.exit(), mraid.open()</li>
        <li>Povolené CDN: fonts.googleapis.com, cdnjs.cloudflare.com, code.jquery.com, cdn.jsdelivr.net, ajax.googleapis.com</li>
        <li>Doporučený formát názvu: <code>HTML5_WIDTHxHEIGHT_name.zip</code></li>
      </ul>
      <p style="margin-top: 10px; font-size: 13px; color: #92400e;">
        <strong>Poznámka:</strong> Překročení velikosti souboru a některá pravidla HTML5 validace se zobrazují jako <strong>varování</strong> (nikoliv chyba) a umožňují export. Pouze nesprávné rozměry blokují validaci.
      </p>
      <p style="margin-top: 15px; font-weight: 600;">
        ✅ Formáty s HTML5 podporou:
      </p>
      <ul id="html5-formats-list">
        <!-- Dynamically generated -->
      </ul>
    </div>

    <div id="network-tables">
      <!-- Dynamically generated from CREATIVE_SPECS -->
    </div>

    <footer>
      <p>Seznam Creative Validator &bull; Verze <span id="app-version">-</span> &bull; <a href="index.html">Zpět na validátor</a></p>
      <p style="margin-top: 5px; font-size: 12px;">Pro aktuální technické specifikace navštivte <a href="https://seznam.prehledreklam.cz/" target="_blank">seznam.prehledreklam.cz</a></p>
    </footer>
  </div>

  <!-- Load specs from the main app -->
  <script src="js/specs-rules.js"></script>
  <script>
    // Network display configuration
    const NETWORK_CONFIG = {
      SKLIK: {
        title: 'Sklik',
        order: 1
      },
      SOS: {
        title: 'SOS (Seznam Oblíbené Služby)',
        order: 2,
        warning: {
          title: '⚠️ Důležité: SOS podporuje POUZE rich media a in-article formáty',
          text: 'Pro standardní bannery (300×250, 300×600, 480×300, atd.) použijte systémy ADFORM, ONEGAR nebo SKLIK.'
        }
      },
      ADFORM: {
        title: 'Adform (RTB)',
        order: 3
      },
      ONEGAR: {
        title: 'Onegar (RTB)',
        order: 4
      },
      HP_EXCLUSIVE: {
        title: 'HP Exclusive',
        order: 5
      },
      GOOGLE_ADS: {
        title: 'Google Ads (Validace)',
        order: 6,
        note: 'Systém pouze pro validaci rozměrů a velikostí. Nepodporuje export s UTM parametry.'
      }
    };

    /**
     * Format file size for display
     */
    function formatFileSize(sizeKB) {
      if (sizeKB >= 1024) {
        return `${(sizeKB / 1024).toFixed(0)} MB`;
      }
      return `${sizeKB} KB`;
    }

    /**
     * Format file formats for display
     */
    function formatFileFormats(formats) {
      return formats.map(f => f.toUpperCase()).join(', ');
    }

    /**
     * Get device class for styling
     */
    function getDeviceClass(device) {
      const deviceLower = device.toLowerCase();
      if (deviceLower === 'mobil') return 'mobile';
      if (deviceLower === 'desktop') return 'desktop';
      if (deviceLower === 'aplikace') return 'app';
      return '';
    }

    /**
     * Format dimensions with proper separator
     */
    function formatDimensions(dimensions, spec) {
      let formatted = dimensions.map(d => d.replace('x', '×')).join(', ');

      // Add multi-file indicator
      if (spec.multiFile && spec.fileCount) {
        formatted += ` (${spec.fileCount} soubory)`;
      }

      return formatted;
    }

    /**
     * Generate table row HTML
     */
    function generateTableRow(spec) {
      const deviceClass = getDeviceClass(spec.device);

      return `
        <tr>
          <td class="format-name">${spec.name}</td>
          <td class="dimensions">${formatDimensions(spec.dimensions, spec)}</td>
          <td class="file-size">${formatFileSize(spec.maxSize)}</td>
          <td class="formats">${formatFileFormats(spec.formats)}</td>
          <td><span class="device ${deviceClass}">${spec.device}</span></td>
        </tr>
      `;
    }

    /**
     * Generate network section HTML
     */
    function generateNetworkSection(networkKey, specs) {
      const config = NETWORK_CONFIG[networkKey];
      if (!config) return '';

      let html = `
        <div class="network-section">
          <h2 class="network-title">${config.title}</h2>
      `;

      // Add warning if exists (for SOS)
      if (config.warning) {
        html += `
          <div class="sos-warning">
            <p>${config.warning.title}</p>
            <p>${config.warning.text}</p>
          </div>
        `;
      }

      // Add note if exists (for Google Ads)
      if (config.note) {
        html += `<p class="network-note">${config.note}</p>`;
      }

      html += `
          <table>
            <thead>
              <tr>
                <th>Formát</th>
                <th>Rozměry</th>
                <th>Max velikost</th>
                <th>Formáty souborů</th>
                <th>Zařízení</th>
              </tr>
            </thead>
            <tbody>
      `;

      // Generate rows for each spec
      for (const [specKey, spec] of Object.entries(specs)) {
        html += generateTableRow(spec);
      }

      html += `
            </tbody>
          </table>
        </div>
      `;

      return html;
    }

    /**
     * Generate HTML5 formats list
     */
    function generateHTML5FormatsList() {
      const html5ByNetwork = {};

      // Collect HTML5 formats by network
      for (const [networkKey, specs] of Object.entries(CREATIVE_SPECS)) {
        const html5Formats = [];

        for (const [specKey, spec] of Object.entries(specs)) {
          if (spec.formats.includes('html5')) {
            const dims = spec.dimensions.map(d => d.replace('x', '×')).join(', ');
            html5Formats.push(`${spec.name} (${dims})`);
          }
        }

        if (html5Formats.length > 0) {
          const config = NETWORK_CONFIG[networkKey];
          const title = config ? config.title.split(' ')[0] : networkKey;
          html5ByNetwork[title] = html5Formats;
        }
      }

      // Generate list HTML
      let html = '';
      for (const [network, formats] of Object.entries(html5ByNetwork)) {
        html += `<li><strong>${network}:</strong> ${formats.join(', ')}</li>`;
      }

      return html;
    }

    /**
     * Initialize the page
     */
    function init() {
      // Generate network tables
      const tablesContainer = document.getElementById('network-tables');

      // Sort networks by order
      const sortedNetworks = Object.entries(CREATIVE_SPECS)
        .sort((a, b) => {
          const orderA = NETWORK_CONFIG[a[0]]?.order || 99;
          const orderB = NETWORK_CONFIG[b[0]]?.order || 99;
          return orderA - orderB;
        });

      let tablesHtml = '';
      for (const [networkKey, specs] of sortedNetworks) {
        tablesHtml += generateNetworkSection(networkKey, specs);
      }

      tablesContainer.innerHTML = tablesHtml;

      // Generate HTML5 formats list
      const html5List = document.getElementById('html5-formats-list');
      html5List.innerHTML = generateHTML5FormatsList();

      // Set version from app.js (fetch it dynamically)
      fetch('js/app.js')
        .then(response => response.text())
        .then(text => {
          const match = text.match(/APP_VERSION\s*=\s*['"]([^'"]+)['"]/);
          if (match) {
            document.getElementById('app-version').textContent = match[1];
          }
        })
        .catch(() => {
          document.getElementById('app-version').textContent = '-';
        });
    }

    // Run on page load
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
